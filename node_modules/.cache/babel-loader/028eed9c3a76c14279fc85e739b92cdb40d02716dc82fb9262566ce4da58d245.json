{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { getDatabase, ref as dbRef, get, set } from \"firebase/database\";\nimport { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, updateProfile, onAuthStateChanged } from \"firebase/auth\";\nexport default {\n  data() {\n    return {\n      username: '',\n      password: '',\n      message: ''\n    };\n  },\n  created() {\n    const auth = getAuth();\n    onAuthStateChanged(auth, user => {\n      if (user) {\n        this.$router.push('/odai-maker');\n      }\n    });\n  },\n  methods: {\n    handleRegister() {\n      const db = getDatabase();\n      get(dbRef(db, 'usernames/' + this.username)).then(snapshot => {\n        if (snapshot.exists()) {\n          this.message = 'その名前は登録済み';\n        } else {\n          const auth = getAuth();\n          createUserWithEmailAndPassword(auth, this.username + '@example.com', this.password).then(userCredential => {\n            updateProfile(userCredential.user, {\n              displayName: this.username\n            });\n            set(dbRef(db, 'usernames/' + this.username), userCredential.user.uid);\n            alert('登録完了。  ' + 'ユーザー名:' + this.username + '　パスワード:' + this.password);\n          }).catch(error => {\n            this.message = 'エラー: ' + error.message;\n          });\n        }\n      });\n    },\n    handleLogin() {\n      const auth = getAuth();\n      signInWithEmailAndPassword(auth, this.username + '@example.com', this.password).then(() => {\n        this.$router.push('/odai-maker');\n      }).catch(error => {\n        this.message = error;\n      });\n    }\n  }\n};","map":{"version":3,"names":["getDatabase","ref","dbRef","get","set","getAuth","createUserWithEmailAndPassword","signInWithEmailAndPassword","updateProfile","onAuthStateChanged","data","username","password","message","created","auth","user","$router","push","methods","handleRegister","db","then","snapshot","exists","userCredential","displayName","uid","alert","catch","error","handleLogin"],"sources":["C:\\Users\\ST\\Desktop\\vue3\\ODAI\\src\\components\\RegisterLogin.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <h2>登録/ログイン</h2>\r\n    <form>\r\n      <div>\r\n        <label for=\"username\">Username:</label>\r\n        <input id=\"username\" v-model=\"username\" type=\"text\" required>\r\n      </div>\r\n      <div>\r\n        <label for=\"password\">Password:</label>\r\n        <input id=\"password\" v-model=\"password\" type=\"password\" required>\r\n      </div>\r\n      <button @click.prevent=\"handleRegister\">登録</button>\r\n      <button @click.prevent=\"handleLogin\">ログイン</button>\r\n    </form>\r\n    <div v-if=\"message\">{{ message }}</div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getDatabase, ref as dbRef, get, set } from \"firebase/database\";\r\nimport { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, updateProfile,onAuthStateChanged } from \"firebase/auth\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      username: '',\r\n      password: '',\r\n      message: '',\r\n    };\r\n  },\r\n  created() {\r\n    const auth = getAuth();\r\n    onAuthStateChanged(auth, (user) => {\r\n      if (user) {\r\n        this.$router.push('/odai-maker');\r\n      }\r\n    });\r\n  },\r\n  methods: {\r\n    handleRegister() {\r\n      const db = getDatabase();\r\n      get(dbRef(db, 'usernames/' + this.username)).then((snapshot) => {\r\n        if (snapshot.exists()) {\r\n          this.message = 'その名前は登録済み';\r\n        } else {\r\n          const auth = getAuth();\r\n          createUserWithEmailAndPassword(auth, this.username + '@example.com', this.password)\r\n            .then((userCredential) => {\r\n              updateProfile(userCredential.user, {\r\n                displayName: this.username\r\n              });\r\n              set(dbRef(db, 'usernames/' + this.username), userCredential.user.uid);\r\n              alert('登録完了。  '+'ユーザー名:'+ this.username + '　パスワード:' + this.password );\r\n            })\r\n            .catch((error) => {\r\n              this.message = 'エラー: ' + error.message;\r\n            });\r\n        }\r\n      });\r\n    },\r\n    handleLogin() {\r\n      const auth = getAuth();\r\n      signInWithEmailAndPassword(auth, this.username + '@example.com', this.password)\r\n      .then(() => {\r\n        this.$router.push('/odai-maker');\r\n      })\r\n      .catch((error) => {\r\n        this.message = error;\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\ndiv {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background-color: #f5f5f5;\r\n}\r\n\r\nh2 {\r\n  margin-bottom: 20px;\r\n}\r\n\r\nform {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 10px;\r\n  background-color: #fff;\r\n  padding: 20px;\r\n  border-radius: 5px;\r\n  box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\ninput {\r\n  padding: 10px;\r\n  border-radius: 5px;\r\n  border: 1px solid #ddd;\r\n}\r\n\r\nbutton {\r\n  padding: 10px;\r\n  border-radius: 5px;\r\n  border: none;\r\n  color: #fff;\r\n  background-color: #333;\r\n  cursor: pointer;\r\n}\r\n\r\nbutton:hover {\r\n  background-color: #555;\r\n}\r\n\r\ndiv[v-if=\"message\"] {\r\n  margin-top: 20px;\r\n  color: red;\r\n}\r\n</style>\r\n"],"mappings":";AAoBA,SAASA,WAAW,EAAEC,GAAE,IAAKC,KAAK,EAAEC,GAAG,EAAEC,GAAE,QAAS,mBAAmB;AACvE,SAASC,OAAO,EAAEC,8BAA8B,EAAEC,0BAA0B,EAAEC,aAAa,EAACC,kBAAiB,QAAS,eAAe;AAErI,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,QAAQ,EAAE,EAAE;MACZC,QAAQ,EAAE,EAAE;MACZC,OAAO,EAAE;IACX,CAAC;EACH,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,MAAMC,IAAG,GAAIV,OAAO,CAAC,CAAC;IACtBI,kBAAkB,CAACM,IAAI,EAAGC,IAAI,IAAK;MACjC,IAAIA,IAAI,EAAE;QACR,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC,aAAa,CAAC;MAClC;IACF,CAAC,CAAC;EACJ,CAAC;EACDC,OAAO,EAAE;IACPC,cAAcA,CAAA,EAAG;MACf,MAAMC,EAAC,GAAIrB,WAAW,CAAC,CAAC;MACxBG,GAAG,CAACD,KAAK,CAACmB,EAAE,EAAE,YAAW,GAAI,IAAI,CAACV,QAAQ,CAAC,CAAC,CAACW,IAAI,CAAEC,QAAQ,IAAK;QAC9D,IAAIA,QAAQ,CAACC,MAAM,CAAC,CAAC,EAAE;UACrB,IAAI,CAACX,OAAM,GAAI,WAAW;QAC5B,OAAO;UACL,MAAME,IAAG,GAAIV,OAAO,CAAC,CAAC;UACtBC,8BAA8B,CAACS,IAAI,EAAE,IAAI,CAACJ,QAAO,GAAI,cAAc,EAAE,IAAI,CAACC,QAAQ,EAC/EU,IAAI,CAAEG,cAAc,IAAK;YACxBjB,aAAa,CAACiB,cAAc,CAACT,IAAI,EAAE;cACjCU,WAAW,EAAE,IAAI,CAACf;YACpB,CAAC,CAAC;YACFP,GAAG,CAACF,KAAK,CAACmB,EAAE,EAAE,YAAW,GAAI,IAAI,CAACV,QAAQ,CAAC,EAAEc,cAAc,CAACT,IAAI,CAACW,GAAG,CAAC;YACrEC,KAAK,CAAC,SAAS,GAAC,QAAQ,GAAE,IAAI,CAACjB,QAAO,GAAI,SAAQ,GAAI,IAAI,CAACC,QAAS,CAAC;UACvE,CAAC,EACAiB,KAAK,CAAEC,KAAK,IAAK;YAChB,IAAI,CAACjB,OAAM,GAAI,OAAM,GAAIiB,KAAK,CAACjB,OAAO;UACxC,CAAC,CAAC;QACN;MACF,CAAC,CAAC;IACJ,CAAC;IACDkB,WAAWA,CAAA,EAAG;MACZ,MAAMhB,IAAG,GAAIV,OAAO,CAAC,CAAC;MACtBE,0BAA0B,CAACQ,IAAI,EAAE,IAAI,CAACJ,QAAO,GAAI,cAAc,EAAE,IAAI,CAACC,QAAQ,EAC7EU,IAAI,CAAC,MAAM;QACV,IAAI,CAACL,OAAO,CAACC,IAAI,CAAC,aAAa,CAAC;MAClC,CAAC,EACAW,KAAK,CAAEC,KAAK,IAAK;QAChB,IAAI,CAACjB,OAAM,GAAIiB,KAAK;MACtB,CAAC,CAAC;IACJ;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}