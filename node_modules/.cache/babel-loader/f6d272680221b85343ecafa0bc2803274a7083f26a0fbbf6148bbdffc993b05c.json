{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { getDatabase, ref as dbRef, get, set } from \"firebase/database\";\nimport { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, updateProfile } from \"firebase/auth\";\nexport default {\n  data() {\n    return {\n      username: '',\n      password: '',\n      message: ''\n    };\n  },\n  created() {\n    const auth = getAuth();\n    onAuthStateChanged(auth, user => {\n      if (user) {\n        this.$router.push('/my-page');\n      }\n    });\n  },\n  methods: {\n    handleRegister() {\n      const db = getDatabase();\n      get(dbRef(db, 'usernames/' + this.username)).then(snapshot => {\n        if (snapshot.exists()) {\n          this.message = 'その名前は登録済み';\n        } else {\n          const auth = getAuth();\n          createUserWithEmailAndPassword(auth, this.username + '@example.com', this.password).then(userCredential => {\n            updateProfile(userCredential.user, {\n              displayName: this.username\n            });\n            set(dbRef(db, 'usernames/' + this.username), userCredential.user.uid);\n            this.message = '登録完了。  ' + 'ユーザー名:' + this.username + '　パスワード:' + this.password;\n          }).catch(error => {\n            this.message = 'エラー: ' + error.message;\n          });\n        }\n      });\n    },\n    handleLogin() {\n      const auth = getAuth();\n      signInWithEmailAndPassword(auth, this.username + '@example.com', this.password).then(() => {\n        // MyPage.vueに飛ばす\n        this.$router.push('/my-page');\n      }).catch(error => {\n        this.message = error;\n      });\n    }\n  }\n};","map":{"version":3,"names":["getDatabase","ref","dbRef","get","set","getAuth","createUserWithEmailAndPassword","signInWithEmailAndPassword","updateProfile","data","username","password","message","created","auth","onAuthStateChanged","user","$router","push","methods","handleRegister","db","then","snapshot","exists","userCredential","displayName","uid","catch","error","handleLogin"],"sources":["C:\\Users\\ST\\Desktop\\vue3\\ODAI\\src\\components\\RegisterLogin.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <h2>登録/ログイン</h2>\r\n    <form>\r\n      <div>\r\n        <label for=\"username\">Username:</label>\r\n        <input id=\"username\" v-model=\"username\" type=\"text\" required>\r\n      </div>\r\n      <div>\r\n        <label for=\"password\">Password:</label>\r\n        <input id=\"password\" v-model=\"password\" type=\"password\" required>\r\n      </div>\r\n      <button @click.prevent=\"handleRegister\">登録</button>\r\n      <button @click.prevent=\"handleLogin\">ログイン</button>\r\n    </form>\r\n    <div v-if=\"message\">{{ message }}</div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getDatabase, ref as dbRef, get, set } from \"firebase/database\";\r\nimport { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, updateProfile } from \"firebase/auth\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      username: '',\r\n      password: '',\r\n      message: '',\r\n    };\r\n  },\r\n  created() {\r\n    const auth = getAuth();\r\n    onAuthStateChanged(auth, (user) => {\r\n      if (user) {\r\n        this.$router.push('/my-page');\r\n      }\r\n    });\r\n  },\r\n  methods: {\r\n    handleRegister() {\r\n      const db = getDatabase();\r\n      get(dbRef(db, 'usernames/' + this.username)).then((snapshot) => {\r\n        if (snapshot.exists()) {\r\n          this.message = 'その名前は登録済み';\r\n        } else {\r\n          const auth = getAuth();\r\n          createUserWithEmailAndPassword(auth, this.username + '@example.com', this.password)\r\n            .then((userCredential) => {\r\n              updateProfile(userCredential.user, {\r\n                displayName: this.username\r\n              });\r\n              set(dbRef(db, 'usernames/' + this.username), userCredential.user.uid);\r\n              this.message = '登録完了。  '+'ユーザー名:'+ this.username + '　パスワード:' + this.password ;\r\n            })\r\n            .catch((error) => {\r\n              this.message = 'エラー: ' + error.message;\r\n            });\r\n        }\r\n      });\r\n    },\r\n    handleLogin() {\r\n      const auth = getAuth();\r\n      signInWithEmailAndPassword(auth, this.username + '@example.com', this.password)\r\n      .then(() => {\r\n        // MyPage.vueに飛ばす\r\n        this.$router.push('/my-page');\r\n      })\r\n      .catch((error) => {\r\n        this.message = error;\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n"],"mappings":";AAoBA,SAASA,WAAW,EAAEC,GAAE,IAAKC,KAAK,EAAEC,GAAG,EAAEC,GAAE,QAAS,mBAAmB;AACvE,SAASC,OAAO,EAAEC,8BAA8B,EAAEC,0BAA0B,EAAEC,aAAY,QAAS,eAAe;AAElH,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,QAAQ,EAAE,EAAE;MACZC,QAAQ,EAAE,EAAE;MACZC,OAAO,EAAE;IACX,CAAC;EACH,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,MAAMC,IAAG,GAAIT,OAAO,CAAC,CAAC;IACtBU,kBAAkB,CAACD,IAAI,EAAGE,IAAI,IAAK;MACjC,IAAIA,IAAI,EAAE;QACR,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC,UAAU,CAAC;MAC/B;IACF,CAAC,CAAC;EACJ,CAAC;EACDC,OAAO,EAAE;IACPC,cAAcA,CAAA,EAAG;MACf,MAAMC,EAAC,GAAIrB,WAAW,CAAC,CAAC;MACxBG,GAAG,CAACD,KAAK,CAACmB,EAAE,EAAE,YAAW,GAAI,IAAI,CAACX,QAAQ,CAAC,CAAC,CAACY,IAAI,CAAEC,QAAQ,IAAK;QAC9D,IAAIA,QAAQ,CAACC,MAAM,CAAC,CAAC,EAAE;UACrB,IAAI,CAACZ,OAAM,GAAI,WAAW;QAC5B,OAAO;UACL,MAAME,IAAG,GAAIT,OAAO,CAAC,CAAC;UACtBC,8BAA8B,CAACQ,IAAI,EAAE,IAAI,CAACJ,QAAO,GAAI,cAAc,EAAE,IAAI,CAACC,QAAQ,EAC/EW,IAAI,CAAEG,cAAc,IAAK;YACxBjB,aAAa,CAACiB,cAAc,CAACT,IAAI,EAAE;cACjCU,WAAW,EAAE,IAAI,CAAChB;YACpB,CAAC,CAAC;YACFN,GAAG,CAACF,KAAK,CAACmB,EAAE,EAAE,YAAW,GAAI,IAAI,CAACX,QAAQ,CAAC,EAAEe,cAAc,CAACT,IAAI,CAACW,GAAG,CAAC;YACrE,IAAI,CAACf,OAAM,GAAI,SAAS,GAAC,QAAQ,GAAE,IAAI,CAACF,QAAO,GAAI,SAAQ,GAAI,IAAI,CAACC,QAAO;UAC7E,CAAC,EACAiB,KAAK,CAAEC,KAAK,IAAK;YAChB,IAAI,CAACjB,OAAM,GAAI,OAAM,GAAIiB,KAAK,CAACjB,OAAO;UACxC,CAAC,CAAC;QACN;MACF,CAAC,CAAC;IACJ,CAAC;IACDkB,WAAWA,CAAA,EAAG;MACZ,MAAMhB,IAAG,GAAIT,OAAO,CAAC,CAAC;MACtBE,0BAA0B,CAACO,IAAI,EAAE,IAAI,CAACJ,QAAO,GAAI,cAAc,EAAE,IAAI,CAACC,QAAQ,EAC7EW,IAAI,CAAC,MAAM;QACV;QACA,IAAI,CAACL,OAAO,CAACC,IAAI,CAAC,UAAU,CAAC;MAC/B,CAAC,EACAU,KAAK,CAAEC,KAAK,IAAK;QAChB,IAAI,CAACjB,OAAM,GAAIiB,KAAK;MACtB,CAAC,CAAC;IACJ;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}